{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THUY TRANG\\\\Downloads\\\\codqtmoi\\\\DoAn_QTCSDLHD\\\\qtcsdlhd__fe\\\\src\\\\Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport './ShoppingCart.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Checkout() {\n  _s();\n  const [cartProducts, setCartProducts] = useState([]);\n  const [message, setMessage] = useState('');\n  const [shippingAddress, setShippingAddress] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Tiền mặt');\n  const [userAddresses, setUserAddresses] = useState([]);\n  const [selectedAddressIndex, setSelectedAddressIndex] = useState(-1);\n  const [fullName, setFullName] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [bankAccount, setBankAccount] = useState(null);\n  const [availableVouchers, setAvailableVouchers] = useState({});\n  const [selectedVouchers, setSelectedVouchers] = useState({});\n  const [selectedProductIds, setSelectedProductIds] = useState([]);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    fetchCartProducts();\n    fetchUserProfile();\n    if (location.state && location.state.selectedVouchers) {\n      setSelectedVouchers(location.state.selectedVouchers);\n    }\n    if (location.state && location.state.selectedProductIds) {\n      setSelectedProductIds(location.state.selectedProductIds);\n    }\n  }, []);\n  const fetchUserProfile = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await fetch('http://localhost:8080/api/users/me', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setFullName(data.fullName || '');\n        if (data.buyerProfile) {\n          setPhoneNumber(data.buyerProfile.phoneNumber || '');\n          setBankAccount(data.buyerProfile.bankAccount || null);\n          if (data.buyerProfile.primaryAddress) {\n            const primaryAddress = data.buyerProfile.primaryAddress;\n            const formattedAddress = `${primaryAddress.street}, ${primaryAddress.ward}, ${primaryAddress.district}, ${primaryAddress.city}`;\n            setShippingAddress(formattedAddress);\n          }\n          if (data.buyerProfile.addresses) {\n            setUserAddresses(data.buyerProfile.addresses);\n          }\n        }\n      }\n    } catch (error) {\n      setMessage('Lỗi lấy thông tin người dùng');\n    }\n  };\n  const fetchCartProducts = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await fetch('http://localhost:8080/api/customers/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setCartProducts(data);\n      }\n    } catch (error) {\n      setMessage('Lỗi lấy giỏ hàng');\n    }\n  };\n  const fetchVouchersForProduct = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:8080/api/vouchers/product/${productId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const vouchers = await response.json();\n        setAvailableVouchers(prev => ({\n          ...prev,\n          [productId]: vouchers\n        }));\n      }\n    } catch {}\n  };\n  useEffect(() => {\n    cartProducts.forEach(product => {\n      fetchVouchersForProduct(product._id);\n    });\n  }, [cartProducts]);\n  const handleVoucherSelect = (productId, voucherId) => {\n    setSelectedVouchers(prev => ({\n      ...prev,\n      [productId]: voucherId\n    }));\n  };\n  const calculateItemTotal = item => {\n    const price = parseFloat(item.price);\n    const quantity = parseInt(item.quantity);\n    let total = price * quantity;\n    const selectedVoucher = selectedVouchers[item._id];\n    const productVouchers = availableVouchers[item._id] || [];\n    const voucher = productVouchers.find(v => v.id === selectedVoucher);\n    if (voucher) {\n      if (voucher.discountType === 'PERCENTAGE') {\n        total = total * (1 - voucher.discountValue / 100);\n      } else if (voucher.discountType === 'FIXED') {\n        total = total - voucher.discountValue;\n      }\n    }\n    return total;\n  };\n  const displayedProducts = selectedProductIds.length > 0 ? cartProducts.filter(p => selectedProductIds.includes(p._id)) : [];\n  const calculateTotal = () => {\n    return displayedProducts.reduce((sum, item) => {\n      if (!selectedProductIds.includes(item._id)) return sum;\n      return sum + calculateItemTotal(item);\n    }, 0);\n  };\n  const handlePlaceOrder = async e => {\n    e.preventDefault();\n    if (!shippingAddress || !paymentMethod || !fullName || !phoneNumber) {\n      setMessage('Vui lòng điền đầy đủ thông tin giao hàng.');\n      return;\n    }\n    if (paymentMethod === 'Thẻ ngân hàng' && !bankAccount) {\n      setMessage('Vui lòng cập nhật thông tin tài khoản ngân hàng trong hồ sơ.');\n      return;\n    }\n    if (displayedProducts.length === 0) {\n      setMessage('Vui lòng chọn ít nhất một sản phẩm để đặt hàng.');\n      return;\n    }\n    const orderItems = displayedProducts.map(item => ({\n      productId: item._id,\n      quantity: parseInt(item.quantity),\n      voucherId: selectedVouchers[item._id]\n    }));\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:8080/api/customers/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          fullName,\n          phoneNumber,\n          shippingAddress,\n          paymentMethod,\n          bankAccount: paymentMethod === 'Thẻ ngân hàng' ? bankAccount : null,\n          items: orderItems\n        })\n      });\n      if (response.ok) {\n        setMessage('Đặt hàng thành công!');\n        setTimeout(() => navigate('/'), 2000);\n      } else {\n        setMessage('Lỗi tạo đơn hàng!');\n      }\n    } catch (error) {\n      setMessage('Lỗi mạng khi tạo đơn hàng!');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shopping-cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate(-1),\n      className: \"back-btn\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"18\",\n        height: \"18\",\n        viewBox: \"0 0 18 18\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        style: {\n          marginRight: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M11.25 14.25L6.75 9L11.25 3.75\",\n          stroke: \"#ee4d2d\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), \"Quay l\\u1EA1i\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Thanh to\\xE1n \\u0111\\u01A1n h\\xE0ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message error\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }, this), displayedProducts.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-list\",\n      children: [displayedProducts.map(product => {\n        var _availableVouchers$pr;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-thumbnail\",\n            style: product.image_url ? {\n              backgroundImage: `url(${product.image_url})`,\n              backgroundSize: 'cover',\n              backgroundRepeat: 'no-repeat',\n              backgroundPosition: 'center'\n            } : {},\n            children: !product.image_url && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-image-thumbnail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-item-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"product-shop-name\",\n              children: [\"C\\u1EEDa h\\xE0ng: \", product.shop_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"price\",\n              children: [product.price.toLocaleString('vi-VN'), \" VND\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"stock\",\n              children: [\"T\\u1ED3n kho: \", product.stock]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"actions\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"voucher-section\",\n                children: ((_availableVouchers$pr = availableVouchers[product._id]) === null || _availableVouchers$pr === void 0 ? void 0 : _availableVouchers$pr.length) > 0 ? /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: selectedVouchers[product._id] || '',\n                  onChange: e => handleVoucherSelect(product._id, e.target.value),\n                  className: \"voucher-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Ch\\u1ECDn voucher\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 49\n                  }, this), (availableVouchers[product._id] || []).map(voucher => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: voucher.id,\n                    children: voucher.discountType === 'PERCENTAGE' ? `Giảm ${voucher.discountValue}%` : `Giảm ${voucher.discountValue.toLocaleString('vi-VN')} VND`\n                  }, voucher.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 53\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"no-voucher-message\",\n                  children: \"Kh\\xF4ng c\\xF3 voucher kh\\u1EA3 d\\u1EE5ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-control\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: product.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-info\",\n            children: selectedVouchers[product._id] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"original-price\",\n                children: [(product.price * product.quantity).toLocaleString('vi-VN'), \" VND\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"discounted-price\",\n                children: [calculateItemTotal(product).toLocaleString('vi-VN'), \" VND\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"normal-price\",\n              children: [(product.price * product.quantity).toLocaleString('vi-VN'), \" VND\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 29\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"cart-total\",\n        children: [\"T\\u1ED5ng c\\u1ED9ng: \", calculateTotal().toLocaleString('vi-VN'), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePlaceOrder,\n        className: \"order-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Th\\xF4ng tin \\u0111\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fullName\",\n            children: \"H\\u1ECD v\\xE0 t\\xEAn ng\\u01B0\\u1EDDi nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"fullName\",\n            value: fullName,\n            onChange: e => setFullName(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phoneNumber\",\n            children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            id: \"phoneNumber\",\n            value: phoneNumber,\n            onChange: e => setPhoneNumber(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"shippingAddress\",\n            children: \"\\u0110\\u1ECBa ch\\u1EC9 giao h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this), userAddresses.length > 0 && /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedAddressIndex,\n            onChange: e => {\n              const idx = parseInt(e.target.value);\n              setSelectedAddressIndex(idx);\n              if (idx === -1) {\n                setShippingAddress('');\n              } else {\n                const addr = userAddresses[idx];\n                setShippingAddress(`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`);\n              }\n            },\n            className: \"address-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: -1,\n              children: \"\\u0110\\u1ECBa ch\\u1EC9 kh\\xE1c\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 37\n            }, this), userAddresses.map((addr, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: idx,\n              children: `${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 41\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"shippingAddress\",\n            value: shippingAddress,\n            onChange: e => {\n              setShippingAddress(e.target.value);\n              setSelectedAddressIndex(-1);\n            },\n            required: true,\n            placeholder: selectedAddressIndex === -1 ? \"Nhập địa chỉ giao hàng\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"paymentMethod\",\n            children: \"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"paymentMethod\",\n            value: paymentMethod,\n            onChange: e => setPaymentMethod(e.target.value),\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Ti\\u1EC1n m\\u1EB7t\",\n              children: \"Ti\\u1EC1n m\\u1EB7t khi nh\\u1EADn h\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Th\\u1EBB ng\\xE2n h\\xE0ng\",\n              children: \"Thanh to\\xE1n b\\u1EB1ng th\\u1EBB ng\\xE2n h\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this), paymentMethod === 'Thẻ ngân hàng' && bankAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bank-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Th\\xF4ng tin t\\xE0i kho\\u1EA3n ng\\xE2n h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bank-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Ng\\xE2n h\\xE0ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 40\n              }, this), \" \", bankAccount.bankName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"S\\u1ED1 t\\xE0i kho\\u1EA3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 40\n              }, this), \" \", bankAccount.accountNumber]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Ch\\u1EE7 t\\xE0i kho\\u1EA3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 40\n              }, this), \" \", bankAccount.accountHolder]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"place-order-btn\",\n          children: \"Thanh to\\xE1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o trong gi\\u1ECF h\\xE0ng.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 9\n  }, this);\n}\n_s(Checkout, \"VrnyyqFmCb5e2cuJHdT1VfK0Xkg=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","cartProducts","setCartProducts","message","setMessage","shippingAddress","setShippingAddress","paymentMethod","setPaymentMethod","userAddresses","setUserAddresses","selectedAddressIndex","setSelectedAddressIndex","fullName","setFullName","phoneNumber","setPhoneNumber","bankAccount","setBankAccount","availableVouchers","setAvailableVouchers","selectedVouchers","setSelectedVouchers","selectedProductIds","setSelectedProductIds","navigate","location","fetchCartProducts","fetchUserProfile","state","token","localStorage","getItem","response","fetch","headers","ok","data","json","buyerProfile","primaryAddress","formattedAddress","street","ward","district","city","addresses","error","fetchVouchersForProduct","productId","vouchers","prev","forEach","product","_id","handleVoucherSelect","voucherId","calculateItemTotal","item","price","parseFloat","quantity","parseInt","total","selectedVoucher","productVouchers","voucher","find","v","id","discountType","discountValue","displayedProducts","length","filter","p","includes","calculateTotal","reduce","sum","handlePlaceOrder","e","preventDefault","orderItems","map","method","body","JSON","stringify","items","setTimeout","className","children","onClick","width","height","viewBox","fill","xmlns","style","marginRight","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","_availableVouchers$pr","image_url","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","name","shop_name","toLocaleString","stock","value","onChange","target","onSubmit","htmlFor","type","required","idx","addr","placeholder","bankName","accountNumber","accountHolder","_c","$RefreshReg$"],"sources":["C:/Users/THUY TRANG/Downloads/codqtmoi/DoAn_QTCSDLHD/qtcsdlhd__fe/src/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport './ShoppingCart.css';\r\n\r\nfunction Checkout() {\r\n    const [cartProducts, setCartProducts] = useState([]);\r\n    const [message, setMessage] = useState('');\r\n    const [shippingAddress, setShippingAddress] = useState('');\r\n    const [paymentMethod, setPaymentMethod] = useState('Tiền mặt');\r\n    const [userAddresses, setUserAddresses] = useState([]);\r\n    const [selectedAddressIndex, setSelectedAddressIndex] = useState(-1);\r\n    const [fullName, setFullName] = useState('');\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const [bankAccount, setBankAccount] = useState(null);\r\n    const [availableVouchers, setAvailableVouchers] = useState({});\r\n    const [selectedVouchers, setSelectedVouchers] = useState({});\r\n    const [selectedProductIds, setSelectedProductIds] = useState([]);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        fetchCartProducts();\r\n        fetchUserProfile();\r\n        if (location.state && location.state.selectedVouchers) {\r\n            setSelectedVouchers(location.state.selectedVouchers);\r\n        }\r\n        if (location.state && location.state.selectedProductIds) {\r\n            setSelectedProductIds(location.state.selectedProductIds);\r\n        }\r\n    }, []);\r\n\r\n    const fetchUserProfile = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) return;\r\n            const response = await fetch('http://localhost:8080/api/users/me', {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setFullName(data.fullName || '');\r\n                if (data.buyerProfile) {\r\n                    setPhoneNumber(data.buyerProfile.phoneNumber || '');\r\n                    setBankAccount(data.buyerProfile.bankAccount || null);\r\n                    if (data.buyerProfile.primaryAddress) {\r\n                        const primaryAddress = data.buyerProfile.primaryAddress;\r\n                        const formattedAddress = `${primaryAddress.street}, ${primaryAddress.ward}, ${primaryAddress.district}, ${primaryAddress.city}`;\r\n                        setShippingAddress(formattedAddress);\r\n                    }\r\n                    if (data.buyerProfile.addresses) {\r\n                        setUserAddresses(data.buyerProfile.addresses);\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            setMessage('Lỗi lấy thông tin người dùng');\r\n        }\r\n    };\r\n\r\n    const fetchCartProducts = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) return;\r\n            const response = await fetch('http://localhost:8080/api/customers/cart', {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCartProducts(data);\r\n            }\r\n        } catch (error) {\r\n            setMessage('Lỗi lấy giỏ hàng');\r\n        }\r\n    };\r\n\r\n    const fetchVouchersForProduct = async (productId) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch(`http://localhost:8080/api/vouchers/product/${productId}`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            if (response.ok) {\r\n                const vouchers = await response.json();\r\n                setAvailableVouchers(prev => ({ ...prev, [productId]: vouchers }));\r\n            }\r\n        } catch { }\r\n    };\r\n\r\n    useEffect(() => {\r\n        cartProducts.forEach(product => {\r\n            fetchVouchersForProduct(product._id);\r\n        });\r\n    }, [cartProducts]);\r\n\r\n    const handleVoucherSelect = (productId, voucherId) => {\r\n        setSelectedVouchers(prev => ({ ...prev, [productId]: voucherId }));\r\n    };\r\n\r\n    const calculateItemTotal = (item) => {\r\n        const price = parseFloat(item.price);\r\n        const quantity = parseInt(item.quantity);\r\n        let total = price * quantity;\r\n        const selectedVoucher = selectedVouchers[item._id];\r\n        const productVouchers = availableVouchers[item._id] || [];\r\n        const voucher = productVouchers.find(v => v.id === selectedVoucher);\r\n        if (voucher) {\r\n            if (voucher.discountType === 'PERCENTAGE') {\r\n                total = total * (1 - voucher.discountValue / 100);\r\n            } else if (voucher.discountType === 'FIXED') {\r\n                total = total - voucher.discountValue;\r\n            }\r\n        }\r\n        return total;\r\n    };\r\n\r\n    const displayedProducts = selectedProductIds.length > 0\r\n        ? cartProducts.filter(p => selectedProductIds.includes(p._id))\r\n        : [];\r\n\r\n    const calculateTotal = () => {\r\n        return displayedProducts.reduce((sum, item) => {\r\n            if (!selectedProductIds.includes(item._id)) return sum;\r\n            return sum + calculateItemTotal(item);\r\n        }, 0);\r\n    };\r\n\r\n    const handlePlaceOrder = async (e) => {\r\n        e.preventDefault();\r\n        if (!shippingAddress || !paymentMethod || !fullName || !phoneNumber) {\r\n            setMessage('Vui lòng điền đầy đủ thông tin giao hàng.');\r\n            return;\r\n        }\r\n        if (paymentMethod === 'Thẻ ngân hàng' && !bankAccount) {\r\n            setMessage('Vui lòng cập nhật thông tin tài khoản ngân hàng trong hồ sơ.');\r\n            return;\r\n        }\r\n        if (displayedProducts.length === 0) {\r\n            setMessage('Vui lòng chọn ít nhất một sản phẩm để đặt hàng.');\r\n            return;\r\n        }\r\n        const orderItems = displayedProducts.map(item => ({\r\n            productId: item._id,\r\n            quantity: parseInt(item.quantity),\r\n            voucherId: selectedVouchers[item._id]\r\n        }));\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch('http://localhost:8080/api/customers/orders', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    fullName,\r\n                    phoneNumber,\r\n                    shippingAddress,\r\n                    paymentMethod,\r\n                    bankAccount: paymentMethod === 'Thẻ ngân hàng' ? bankAccount : null,\r\n                    items: orderItems\r\n                })\r\n            });\r\n            if (response.ok) {\r\n                setMessage('Đặt hàng thành công!');\r\n                setTimeout(() => navigate('/'), 2000);\r\n            } else {\r\n                setMessage('Lỗi tạo đơn hàng!');\r\n            }\r\n        } catch (error) {\r\n            setMessage('Lỗi mạng khi tạo đơn hàng!');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"shopping-cart-container\">\r\n            <button onClick={() => navigate(-1)} className=\"back-btn\">\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={{ marginRight: 4 }}>\r\n                    <path d=\"M11.25 14.25L6.75 9L11.25 3.75\" stroke=\"#ee4d2d\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n                Quay lại\r\n            </button>\r\n            <h2>Thanh toán đơn hàng</h2>\r\n            {message && <p className=\"message error\">{message}</p>}\r\n            {displayedProducts.length > 0 ? (\r\n                <div className=\"cart-list\">\r\n                    {displayedProducts.map(product => (\r\n                        <div key={product._id} className=\"cart-item\">\r\n                            <div className=\"product-thumbnail\"\r\n                                style={product.image_url ? {\r\n                                    backgroundImage: `url(${product.image_url})`,\r\n                                    backgroundSize: 'cover',\r\n                                    backgroundRepeat: 'no-repeat',\r\n                                    backgroundPosition: 'center',\r\n                                } : {}}>\r\n                                {!product.image_url && <div className=\"no-image-thumbnail\"></div>}\r\n                            </div>\r\n                            <div className=\"cart-item-details\">\r\n                                <h3>{product.name}</h3>\r\n                                <p className=\"product-shop-name\">Cửa hàng: {product.shop_name}</p>\r\n                                <p className=\"price\">{product.price.toLocaleString('vi-VN')} VND</p>\r\n                                <p className=\"stock\">Tồn kho: {product.stock}</p>\r\n                                <div className=\"actions\">\r\n                                    <div className=\"voucher-section\">\r\n                                        {(availableVouchers[product._id]?.length > 0) ? (\r\n                                            <select\r\n                                                value={selectedVouchers[product._id] || ''}\r\n                                                onChange={(e) => handleVoucherSelect(product._id, e.target.value)}\r\n                                                className=\"voucher-select\"\r\n                                            >\r\n                                                <option value=\"\">Chọn voucher</option>\r\n                                                {(availableVouchers[product._id] || []).map(voucher => (\r\n                                                    <option key={voucher.id} value={voucher.id}>\r\n                                                        {voucher.discountType === 'PERCENTAGE'\r\n                                                            ? `Giảm ${voucher.discountValue}%`\r\n                                                            : `Giảm ${voucher.discountValue.toLocaleString('vi-VN')} VND`}\r\n                                                    </option>\r\n                                                ))}\r\n                                            </select>\r\n                                        ) : (\r\n                                            <div className=\"no-voucher-message\">\r\n                                                Không có voucher khả dụng\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"quantity-control\">\r\n                                <span>{product.quantity}</span>\r\n                            </div>\r\n                            <div className=\"price-info\">\r\n                                {selectedVouchers[product._id] ? (\r\n                                    <>\r\n                                        <p className=\"original-price\">\r\n                                            {(product.price * product.quantity).toLocaleString('vi-VN')} VND\r\n                                        </p>\r\n                                        <p className=\"discounted-price\">\r\n                                            {calculateItemTotal(product).toLocaleString('vi-VN')} VND\r\n                                        </p>\r\n                                    </>\r\n                                ) : (\r\n                                    <p className=\"normal-price\">\r\n                                        {(product.price * product.quantity).toLocaleString('vi-VN')} VND\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    <h3 className=\"cart-total\">Tổng cộng: {calculateTotal().toLocaleString('vi-VN')} VND</h3>\r\n                    <form onSubmit={handlePlaceOrder} className=\"order-form\">\r\n                        <h4>Thông tin đặt hàng</h4>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"fullName\">Họ và tên người nhận</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"fullName\"\r\n                                value={fullName}\r\n                                onChange={e => setFullName(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"phoneNumber\">Số điện thoại</label>\r\n                            <input\r\n                                type=\"tel\"\r\n                                id=\"phoneNumber\"\r\n                                value={phoneNumber}\r\n                                onChange={e => setPhoneNumber(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"shippingAddress\">Địa chỉ giao hàng</label>\r\n                            {userAddresses.length > 0 && (\r\n                                <select\r\n                                    value={selectedAddressIndex}\r\n                                    onChange={(e) => {\r\n                                        const idx = parseInt(e.target.value);\r\n                                        setSelectedAddressIndex(idx);\r\n                                        if (idx === -1) {\r\n                                            setShippingAddress('');\r\n                                        } else {\r\n                                            const addr = userAddresses[idx];\r\n                                            setShippingAddress(`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`);\r\n                                        }\r\n                                    }}\r\n                                    className=\"address-select\"\r\n                                >\r\n                                    <option value={-1}>Địa chỉ khác</option>\r\n                                    {userAddresses.map((addr, idx) => (\r\n                                        <option key={idx} value={idx}>\r\n                                            {`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            )}\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"shippingAddress\"\r\n                                value={shippingAddress}\r\n                                onChange={e => {\r\n                                    setShippingAddress(e.target.value);\r\n                                    setSelectedAddressIndex(-1);\r\n                                }}\r\n                                required\r\n                                placeholder={selectedAddressIndex === -1 ? \"Nhập địa chỉ giao hàng\" : \"\"}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"paymentMethod\">Phương thức thanh toán</label>\r\n                            <select\r\n                                id=\"paymentMethod\"\r\n                                value={paymentMethod}\r\n                                onChange={e => setPaymentMethod(e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"Tiền mặt\">Tiền mặt khi nhận hàng</option>\r\n                                <option value=\"Thẻ ngân hàng\">Thanh toán bằng thẻ ngân hàng</option>\r\n                            </select>\r\n                        </div>\r\n                        {paymentMethod === 'Thẻ ngân hàng' && bankAccount && (\r\n                            <div className=\"bank-info\">\r\n                                <h5>Thông tin tài khoản ngân hàng</h5>\r\n                                <div className=\"bank-details\">\r\n                                    <p><strong>Ngân hàng:</strong> {bankAccount.bankName}</p>\r\n                                    <p><strong>Số tài khoản:</strong> {bankAccount.accountNumber}</p>\r\n                                    <p><strong>Chủ tài khoản:</strong> {bankAccount.accountHolder}</p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <button type=\"submit\" className=\"place-order-btn\">Thanh toán</button>\r\n                    </form>\r\n                </div>\r\n            ) : (\r\n                <p>Không có sản phẩm nào trong giỏ hàng.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Checkout; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}