{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\THUY TRANG\\\\Downloads\\\\Qtcsdl\\\\DoAn_QTCSDLHD\\\\qtcsdlhd__fe\\\\src\\\\ShoppingCart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './ShoppingCart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ShoppingCart({\n  onPlaceOrder\n}) {\n  _s();\n  const [cartProducts, setCartProducts] = useState([]);\n  const [message, setMessage] = useState('');\n  const [messageTimeoutId, setMessageTimeoutId] = useState(null);\n  const [shippingAddress, setShippingAddress] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('Tiền mặt');\n  const [userAddresses, setUserAddresses] = useState([]);\n  const [selectedAddressIndex, setSelectedAddressIndex] = useState(-1);\n  const [fullName, setFullName] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [bankAccount, setBankAccount] = useState(null);\n  const [availableVouchers, setAvailableVouchers] = useState({});\n  const [selectedVouchers, setSelectedVouchers] = useState({});\n  const displayMessage = (msg, duration = 3000) => {\n    if (messageTimeoutId) {\n      clearTimeout(messageTimeoutId);\n    }\n    setMessage(msg);\n    const id = setTimeout(() => {\n      setMessage('');\n      setMessageTimeoutId(null);\n    }, duration);\n    setMessageTimeoutId(id);\n  };\n  const fetchUserProfile = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await fetch('http://localhost:8080/api/users/me', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setFullName(data.fullName || '');\n        if (data.buyerProfile) {\n          setPhoneNumber(data.buyerProfile.phoneNumber || '');\n          setBankAccount(data.buyerProfile.bankAccount || null);\n          if (data.buyerProfile.primaryAddress) {\n            const primaryAddress = data.buyerProfile.primaryAddress;\n            const formattedAddress = `${primaryAddress.street}, ${primaryAddress.ward}, ${primaryAddress.district}, ${primaryAddress.city}`;\n            setShippingAddress(formattedAddress);\n          }\n          if (data.buyerProfile.addresses) {\n            setUserAddresses(data.buyerProfile.addresses);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching user profile:', error);\n    }\n  };\n  const fetchCartProducts = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        displayMessage('Bạn cần đăng nhập để xem giỏ hàng.', 5000);\n        return;\n      }\n      const response = await fetch('http://localhost:8080/api/customers/cart', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setCartProducts(data);\n      } else {\n        const errorText = await response.text();\n        displayMessage(`Error fetching cart: ${errorText}`, 5000);\n      }\n    } catch (error) {\n      displayMessage(`Network error fetching cart: ${error.message}`, 5000);\n    }\n  };\n  const fetchVouchersForProduct = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:8080/api/vouchers/product/${productId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const vouchers = await response.json();\n        setAvailableVouchers(prev => ({\n          ...prev,\n          [productId]: vouchers\n        }));\n      }\n    } catch (error) {\n      console.error('Error fetching vouchers:', error);\n    }\n  };\n  const handleVoucherSelect = (productId, voucherId) => {\n    setSelectedVouchers(prev => ({\n      ...prev,\n      [productId]: voucherId\n    }));\n  };\n  useEffect(() => {\n    fetchCartProducts();\n    fetchUserProfile();\n  }, []);\n  useEffect(() => {\n    // Fetch vouchers for each product in cart\n    cartProducts.forEach(product => {\n      fetchVouchersForProduct(product._id);\n    });\n  }, [cartProducts]);\n  const handleUpdateQuantity = async (productId, quantity) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:8080/api/customers/cart/update-quantity/${productId}/${quantity}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        fetchCartProducts();\n        displayMessage('Số lượng sản phẩm đã được cập nhật.');\n      } else {\n        const errorText = await response.text();\n        displayMessage(`Error updating quantity: ${errorText}`, 5000);\n      }\n    } catch (error) {\n      displayMessage(`Network error updating quantity: ${error.message}`, 5000);\n    }\n  };\n  const handleRemoveProduct = async productId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:8080/api/customers/cart/remove', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          productId\n        })\n      });\n      if (response.ok) {\n        fetchCartProducts();\n        displayMessage('Sản phẩm đã được xóa khỏi giỏ hàng.');\n      } else {\n        const errorText = await response.text();\n        displayMessage(`Error removing product: ${errorText}`, 5000);\n      }\n    } catch (error) {\n      displayMessage(`Network error removing product: ${error.message}`, 5000);\n    }\n  };\n  const calculateItemTotal = item => {\n    const price = parseFloat(item.price);\n    const quantity = parseInt(item.quantity);\n    let total = price * quantity;\n\n    // Apply voucher discount if selected\n    const selectedVoucher = selectedVouchers[item._id];\n    const productVouchers = availableVouchers[item._id] || [];\n    const voucher = productVouchers.find(v => v.id === selectedVoucher);\n    if (voucher) {\n      if (voucher.discountType === 'PERCENTAGE') {\n        total = total * (1 - voucher.discountValue / 100);\n      } else if (voucher.discountType === 'FIXED') {\n        total = total - voucher.discountValue;\n      }\n    }\n    return total;\n  };\n  const calculateTotal = () => {\n    return cartProducts.reduce((sum, item) => {\n      return sum + calculateItemTotal(item);\n    }, 0);\n  };\n  const handlePlaceOrder = async e => {\n    e.preventDefault();\n    if (!shippingAddress || !paymentMethod || !fullName || !phoneNumber) {\n      displayMessage(\"Vui lòng điền đầy đủ thông tin giao hàng.\", 5000);\n      return;\n    }\n    if (paymentMethod === 'Thẻ ngân hàng' && !bankAccount) {\n      displayMessage(\"Vui lòng cập nhật thông tin tài khoản ngân hàng trong hồ sơ.\", 5000);\n      return;\n    }\n    if (cartProducts.length === 0) {\n      displayMessage(\"Giỏ hàng của bạn đang trống.\", 5000);\n      return;\n    }\n    const orderItems = cartProducts.map(item => ({\n      productId: item._id,\n      quantity: parseInt(item.quantity),\n      voucherId: selectedVouchers[item._id]\n    }));\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:8080/api/customers/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          fullName,\n          phoneNumber,\n          shippingAddress,\n          paymentMethod,\n          bankAccount: paymentMethod === 'Thẻ ngân hàng' ? bankAccount : null,\n          items: orderItems\n        })\n      });\n      if (response.ok) {\n        const orderId = await response.text();\n        setCartProducts([]);\n        setShippingAddress('');\n        setPaymentMethod('Tiền mặt');\n        setSelectedVouchers({});\n        onPlaceOrder(orderId);\n      } else {\n        const errorText = await response.text();\n        displayMessage(`Lỗi tạo đơn hàng: ${errorText}`, 5000);\n      }\n    } catch (error) {\n      displayMessage(`Lỗi mạng khi tạo đơn hàng: ${error.message}`, 5000);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shopping-cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Gi\\u1ECF h\\xE0ng c\\u1EE7a b\\u1EA1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message error\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 25\n    }, this), cartProducts.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-list\",\n      children: [cartProducts.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-thumbnail\",\n          style: product.image_url ? {\n            backgroundImage: `url(${product.image_url})`,\n            backgroundSize: 'cover',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center'\n          } : {},\n          children: !product.image_url && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-image-thumbnail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 56\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-item-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"price\",\n            children: [product.price.toLocaleString('vi-VN'), \" VND\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"voucher-section\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedVouchers[product._id] || '',\n              onChange: e => handleVoucherSelect(product._id, e.target.value),\n              className: \"voucher-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Ch\\u1ECDn voucher\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 41\n              }, this), (availableVouchers[product._id] || []).map(voucher => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: voucher.id,\n                children: voucher.discountType === 'PERCENTAGE' ? `Giảm ${voucher.discountValue}%` : `Giảm ${voucher.discountValue.toLocaleString('vi-VN')} VND`\n              }, voucher.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 45\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quantity-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleUpdateQuantity(product._id, product.quantity - 1),\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: product.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleUpdateQuantity(product._id, product.quantity + 1),\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"original-price\",\n            children: [(product.price * product.quantity).toLocaleString('vi-VN'), \" VND\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 33\n          }, this), selectedVouchers[product._id] && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"discounted-price\",\n            children: [calculateItemTotal(product).toLocaleString('vi-VN'), \" VND\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleRemoveProduct(product._id),\n          className: \"remove-btn\",\n          children: \"X\\xF3a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 29\n        }, this)]\n      }, product._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"cart-total\",\n        children: [\"T\\u1ED5ng c\\u1ED9ng: \", calculateTotal().toLocaleString('vi-VN'), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePlaceOrder,\n        className: \"order-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Th\\xF4ng tin \\u0111\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fullName\",\n            children: \"H\\u1ECD v\\xE0 t\\xEAn ng\\u01B0\\u1EDDi nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"fullName\",\n            value: fullName,\n            onChange: e => setFullName(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phoneNumber\",\n            children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            id: \"phoneNumber\",\n            value: phoneNumber,\n            onChange: e => setPhoneNumber(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"shippingAddress\",\n            children: \"\\u0110\\u1ECBa ch\\u1EC9 giao h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 29\n          }, this), userAddresses.length > 0 && /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedAddressIndex,\n            onChange: e => {\n              const idx = parseInt(e.target.value);\n              setSelectedAddressIndex(idx);\n              if (idx === -1) {\n                setShippingAddress('');\n              } else {\n                const addr = userAddresses[idx];\n                setShippingAddress(`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`);\n              }\n            },\n            className: \"address-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: -1,\n              children: \"\\u0110\\u1ECBa ch\\u1EC9 kh\\xE1c\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 37\n            }, this), userAddresses.map((addr, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: idx,\n              children: `${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 41\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"shippingAddress\",\n            value: shippingAddress,\n            onChange: e => {\n              setShippingAddress(e.target.value);\n              setSelectedAddressIndex(-1);\n            },\n            required: true,\n            placeholder: selectedAddressIndex === -1 ? \"Nhập địa chỉ giao hàng\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"paymentMethod\",\n            children: \"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"paymentMethod\",\n            value: paymentMethod,\n            onChange: e => setPaymentMethod(e.target.value),\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Ti\\u1EC1n m\\u1EB7t\",\n              children: \"Ti\\u1EC1n m\\u1EB7t khi nh\\u1EADn h\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Th\\u1EBB ng\\xE2n h\\xE0ng\",\n              children: \"Thanh to\\xE1n b\\u1EB1ng th\\u1EBB ng\\xE2n h\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 25\n        }, this), paymentMethod === 'Thẻ ngân hàng' && bankAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bank-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Th\\xF4ng tin t\\xE0i kho\\u1EA3n ng\\xE2n h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bank-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Ng\\xE2n h\\xE0ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 40\n              }, this), \" \", bankAccount.bankName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"S\\u1ED1 t\\xE0i kho\\u1EA3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 40\n              }, this), \" \", bankAccount.accountNumber]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Ch\\u1EE7 t\\xE0i kho\\u1EA3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 40\n              }, this), \" \", bankAccount.accountHolder]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"place-order-btn\",\n          children: \"\\u0110\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Gi\\u1ECF h\\xE0ng tr\\u1ED1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 9\n  }, this);\n}\n_s(ShoppingCart, \"9QiH+jV4ZCA4wxwXqkwBdthvzjI=\");\n_c = ShoppingCart;\nexport default ShoppingCart;\nvar _c;\n$RefreshReg$(_c, \"ShoppingCart\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ShoppingCart","onPlaceOrder","_s","cartProducts","setCartProducts","message","setMessage","messageTimeoutId","setMessageTimeoutId","shippingAddress","setShippingAddress","paymentMethod","setPaymentMethod","userAddresses","setUserAddresses","selectedAddressIndex","setSelectedAddressIndex","fullName","setFullName","phoneNumber","setPhoneNumber","bankAccount","setBankAccount","availableVouchers","setAvailableVouchers","selectedVouchers","setSelectedVouchers","displayMessage","msg","duration","clearTimeout","id","setTimeout","fetchUserProfile","token","localStorage","getItem","response","fetch","headers","ok","data","json","buyerProfile","primaryAddress","formattedAddress","street","ward","district","city","addresses","error","console","fetchCartProducts","errorText","text","fetchVouchersForProduct","productId","vouchers","prev","handleVoucherSelect","voucherId","forEach","product","_id","handleUpdateQuantity","quantity","method","handleRemoveProduct","body","JSON","stringify","calculateItemTotal","item","price","parseFloat","parseInt","total","selectedVoucher","productVouchers","voucher","find","v","discountType","discountValue","calculateTotal","reduce","sum","handlePlaceOrder","e","preventDefault","length","orderItems","map","items","orderId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","image_url","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","name","toLocaleString","value","onChange","target","onClick","onSubmit","htmlFor","type","required","idx","addr","placeholder","bankName","accountNumber","accountHolder","_c","$RefreshReg$"],"sources":["C:/Users/THUY TRANG/Downloads/Qtcsdl/DoAn_QTCSDLHD/qtcsdlhd__fe/src/ShoppingCart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './ShoppingCart.css';\r\n\r\nfunction ShoppingCart({ onPlaceOrder }) {\r\n    const [cartProducts, setCartProducts] = useState([]);\r\n    const [message, setMessage] = useState('');\r\n    const [messageTimeoutId, setMessageTimeoutId] = useState(null);\r\n    const [shippingAddress, setShippingAddress] = useState('');\r\n    const [paymentMethod, setPaymentMethod] = useState('Tiền mặt');\r\n    const [userAddresses, setUserAddresses] = useState([]);\r\n    const [selectedAddressIndex, setSelectedAddressIndex] = useState(-1);\r\n    const [fullName, setFullName] = useState('');\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const [bankAccount, setBankAccount] = useState(null);\r\n    const [availableVouchers, setAvailableVouchers] = useState({});\r\n    const [selectedVouchers, setSelectedVouchers] = useState({});\r\n\r\n    const displayMessage = (msg, duration = 3000) => {\r\n        if (messageTimeoutId) {\r\n            clearTimeout(messageTimeoutId);\r\n        }\r\n        setMessage(msg);\r\n        const id = setTimeout(() => {\r\n            setMessage('');\r\n            setMessageTimeoutId(null);\r\n        }, duration);\r\n        setMessageTimeoutId(id);\r\n    };\r\n\r\n    const fetchUserProfile = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) return;\r\n\r\n            const response = await fetch('http://localhost:8080/api/users/me', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setFullName(data.fullName || '');\r\n\r\n                if (data.buyerProfile) {\r\n                    setPhoneNumber(data.buyerProfile.phoneNumber || '');\r\n                    setBankAccount(data.buyerProfile.bankAccount || null);\r\n\r\n                    if (data.buyerProfile.primaryAddress) {\r\n                        const primaryAddress = data.buyerProfile.primaryAddress;\r\n                        const formattedAddress = `${primaryAddress.street}, ${primaryAddress.ward}, ${primaryAddress.district}, ${primaryAddress.city}`;\r\n                        setShippingAddress(formattedAddress);\r\n                    }\r\n\r\n                    if (data.buyerProfile.addresses) {\r\n                        setUserAddresses(data.buyerProfile.addresses);\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching user profile:', error);\r\n        }\r\n    };\r\n\r\n    const fetchCartProducts = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                displayMessage('Bạn cần đăng nhập để xem giỏ hàng.', 5000);\r\n                return;\r\n            }\r\n            const response = await fetch('http://localhost:8080/api/customers/cart', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCartProducts(data);\r\n            } else {\r\n                const errorText = await response.text();\r\n                displayMessage(`Error fetching cart: ${errorText}`, 5000);\r\n            }\r\n        } catch (error) {\r\n            displayMessage(`Network error fetching cart: ${error.message}`, 5000);\r\n        }\r\n    };\r\n\r\n    const fetchVouchersForProduct = async (productId) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch(`http://localhost:8080/api/vouchers/product/${productId}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            if (response.ok) {\r\n                const vouchers = await response.json();\r\n                setAvailableVouchers(prev => ({\r\n                    ...prev,\r\n                    [productId]: vouchers\r\n                }));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching vouchers:', error);\r\n        }\r\n    };\r\n\r\n    const handleVoucherSelect = (productId, voucherId) => {\r\n        setSelectedVouchers(prev => ({\r\n            ...prev,\r\n            [productId]: voucherId\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchCartProducts();\r\n        fetchUserProfile();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Fetch vouchers for each product in cart\r\n        cartProducts.forEach(product => {\r\n            fetchVouchersForProduct(product._id);\r\n        });\r\n    }, [cartProducts]);\r\n\r\n    const handleUpdateQuantity = async (productId, quantity) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch(`http://localhost:8080/api/customers/cart/update-quantity/${productId}/${quantity}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            if (response.ok) {\r\n                fetchCartProducts();\r\n                displayMessage('Số lượng sản phẩm đã được cập nhật.');\r\n            } else {\r\n                const errorText = await response.text();\r\n                displayMessage(`Error updating quantity: ${errorText}`, 5000);\r\n            }\r\n        } catch (error) {\r\n            displayMessage(`Network error updating quantity: ${error.message}`, 5000);\r\n        }\r\n    };\r\n\r\n    const handleRemoveProduct = async (productId) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch('http://localhost:8080/api/customers/cart/remove', {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({ productId })\r\n            });\r\n            if (response.ok) {\r\n                fetchCartProducts();\r\n                displayMessage('Sản phẩm đã được xóa khỏi giỏ hàng.');\r\n            } else {\r\n                const errorText = await response.text();\r\n                displayMessage(`Error removing product: ${errorText}`, 5000);\r\n            }\r\n        } catch (error) {\r\n            displayMessage(`Network error removing product: ${error.message}`, 5000);\r\n        }\r\n    };\r\n\r\n    const calculateItemTotal = (item) => {\r\n        const price = parseFloat(item.price);\r\n        const quantity = parseInt(item.quantity);\r\n        let total = price * quantity;\r\n\r\n        // Apply voucher discount if selected\r\n        const selectedVoucher = selectedVouchers[item._id];\r\n        const productVouchers = availableVouchers[item._id] || [];\r\n        const voucher = productVouchers.find(v => v.id === selectedVoucher);\r\n\r\n        if (voucher) {\r\n            if (voucher.discountType === 'PERCENTAGE') {\r\n                total = total * (1 - voucher.discountValue / 100);\r\n            } else if (voucher.discountType === 'FIXED') {\r\n                total = total - voucher.discountValue;\r\n            }\r\n        }\r\n\r\n        return total;\r\n    };\r\n\r\n    const calculateTotal = () => {\r\n        return cartProducts.reduce((sum, item) => {\r\n            return sum + calculateItemTotal(item);\r\n        }, 0);\r\n    };\r\n\r\n    const handlePlaceOrder = async (e) => {\r\n        e.preventDefault();\r\n        if (!shippingAddress || !paymentMethod || !fullName || !phoneNumber) {\r\n            displayMessage(\"Vui lòng điền đầy đủ thông tin giao hàng.\", 5000);\r\n            return;\r\n        }\r\n\r\n        if (paymentMethod === 'Thẻ ngân hàng' && !bankAccount) {\r\n            displayMessage(\"Vui lòng cập nhật thông tin tài khoản ngân hàng trong hồ sơ.\", 5000);\r\n            return;\r\n        }\r\n\r\n        if (cartProducts.length === 0) {\r\n            displayMessage(\"Giỏ hàng của bạn đang trống.\", 5000);\r\n            return;\r\n        }\r\n\r\n        const orderItems = cartProducts.map(item => ({\r\n            productId: item._id,\r\n            quantity: parseInt(item.quantity),\r\n            voucherId: selectedVouchers[item._id]\r\n        }));\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch('http://localhost:8080/api/customers/orders', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    fullName,\r\n                    phoneNumber,\r\n                    shippingAddress,\r\n                    paymentMethod,\r\n                    bankAccount: paymentMethod === 'Thẻ ngân hàng' ? bankAccount : null,\r\n                    items: orderItems\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const orderId = await response.text();\r\n                setCartProducts([]);\r\n                setShippingAddress('');\r\n                setPaymentMethod('Tiền mặt');\r\n                setSelectedVouchers({});\r\n                onPlaceOrder(orderId);\r\n            } else {\r\n                const errorText = await response.text();\r\n                displayMessage(`Lỗi tạo đơn hàng: ${errorText}`, 5000);\r\n            }\r\n        } catch (error) {\r\n            displayMessage(`Lỗi mạng khi tạo đơn hàng: ${error.message}`, 5000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"shopping-cart-container\">\r\n            <h2>Giỏ hàng của bạn</h2>\r\n            {message && <p className=\"message error\">{message}</p>}\r\n\r\n            {cartProducts.length > 0 ? (\r\n                <div className=\"cart-list\">\r\n                    {cartProducts.map(product => (\r\n                        <div key={product._id} className=\"cart-item\">\r\n                            <div\r\n                                className=\"product-thumbnail\"\r\n                                style={product.image_url ? {\r\n                                    backgroundImage: `url(${product.image_url})`,\r\n                                    backgroundSize: 'cover',\r\n                                    backgroundRepeat: 'no-repeat',\r\n                                    backgroundPosition: 'center',\r\n                                } : {}}\r\n                            >\r\n                                {!product.image_url && <div className=\"no-image-thumbnail\"></div>}\r\n                            </div>\r\n                            <div className=\"cart-item-details\">\r\n                                <h3>{product.name}</h3>\r\n                                <p className=\"price\">{product.price.toLocaleString('vi-VN')} VND</p>\r\n                                <div className=\"voucher-section\">\r\n                                    <select\r\n                                        value={selectedVouchers[product._id] || ''}\r\n                                        onChange={(e) => handleVoucherSelect(product._id, e.target.value)}\r\n                                        className=\"voucher-select\"\r\n                                    >\r\n                                        <option value=\"\">Chọn voucher</option>\r\n                                        {(availableVouchers[product._id] || []).map(voucher => (\r\n                                            <option key={voucher.id} value={voucher.id}>\r\n                                                {voucher.discountType === 'PERCENTAGE'\r\n                                                    ? `Giảm ${voucher.discountValue}%`\r\n                                                    : `Giảm ${voucher.discountValue.toLocaleString('vi-VN')} VND`}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"quantity-control\">\r\n                                <button onClick={() => handleUpdateQuantity(product._id, product.quantity - 1)}>-</button>\r\n                                <span>{product.quantity}</span>\r\n                                <button onClick={() => handleUpdateQuantity(product._id, product.quantity + 1)}>+</button>\r\n                            </div>\r\n                            <div className=\"price-info\">\r\n                                <p className=\"original-price\">\r\n                                    {(product.price * product.quantity).toLocaleString('vi-VN')} VND\r\n                                </p>\r\n                                {selectedVouchers[product._id] && (\r\n                                    <p className=\"discounted-price\">\r\n                                        {calculateItemTotal(product).toLocaleString('vi-VN')} VND\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                            <button onClick={() => handleRemoveProduct(product._id)} className=\"remove-btn\">Xóa</button>\r\n                        </div>\r\n                    ))}\r\n                    <h3 className=\"cart-total\">Tổng cộng: {calculateTotal().toLocaleString('vi-VN')} VND</h3>\r\n\r\n                    <form onSubmit={handlePlaceOrder} className=\"order-form\">\r\n                        <h4>Thông tin đặt hàng</h4>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"fullName\">Họ và tên người nhận</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"fullName\"\r\n                                value={fullName}\r\n                                onChange={e => setFullName(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"phoneNumber\">Số điện thoại</label>\r\n                            <input\r\n                                type=\"tel\"\r\n                                id=\"phoneNumber\"\r\n                                value={phoneNumber}\r\n                                onChange={e => setPhoneNumber(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"shippingAddress\">Địa chỉ giao hàng</label>\r\n                            {userAddresses.length > 0 && (\r\n                                <select\r\n                                    value={selectedAddressIndex}\r\n                                    onChange={(e) => {\r\n                                        const idx = parseInt(e.target.value);\r\n                                        setSelectedAddressIndex(idx);\r\n                                        if (idx === -1) {\r\n                                            setShippingAddress('');\r\n                                        } else {\r\n                                            const addr = userAddresses[idx];\r\n                                            setShippingAddress(`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`);\r\n                                        }\r\n                                    }}\r\n                                    className=\"address-select\"\r\n                                >\r\n                                    <option value={-1}>Địa chỉ khác</option>\r\n                                    {userAddresses.map((addr, idx) => (\r\n                                        <option key={idx} value={idx}>\r\n                                            {`${addr.street}, ${addr.ward}, ${addr.district}, ${addr.city}`}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            )}\r\n                            <input\r\n                                type=\"text\"\r\n                                id=\"shippingAddress\"\r\n                                value={shippingAddress}\r\n                                onChange={e => {\r\n                                    setShippingAddress(e.target.value);\r\n                                    setSelectedAddressIndex(-1);\r\n                                }}\r\n                                required\r\n                                placeholder={selectedAddressIndex === -1 ? \"Nhập địa chỉ giao hàng\" : \"\"}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"paymentMethod\">Phương thức thanh toán</label>\r\n                            <select\r\n                                id=\"paymentMethod\"\r\n                                value={paymentMethod}\r\n                                onChange={e => setPaymentMethod(e.target.value)}\r\n                                required\r\n                            >\r\n                                <option value=\"Tiền mặt\">Tiền mặt khi nhận hàng</option>\r\n                                <option value=\"Thẻ ngân hàng\">Thanh toán bằng thẻ ngân hàng</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {paymentMethod === 'Thẻ ngân hàng' && bankAccount && (\r\n                            <div className=\"bank-info\">\r\n                                <h5>Thông tin tài khoản ngân hàng</h5>\r\n                                <div className=\"bank-details\">\r\n                                    <p><strong>Ngân hàng:</strong> {bankAccount.bankName}</p>\r\n                                    <p><strong>Số tài khoản:</strong> {bankAccount.accountNumber}</p>\r\n                                    <p><strong>Chủ tài khoản:</strong> {bankAccount.accountHolder}</p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <button type=\"submit\" className=\"place-order-btn\">Đặt hàng</button>\r\n                    </form>\r\n                </div>\r\n            ) : (\r\n                <p>Giỏ hàng trống</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ShoppingCart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}